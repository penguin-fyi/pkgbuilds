# Maintainer: Jeff M. Hubbard <jeffmhubbard@gmail.com>
pkgname='penguin-base'
_pkgname='base'
pkgver=0.7
pkgrel=1
pkgdesc="The Penguin base system"
arch=('any')
url="https://penguin.fyi/"
license=('MIT')
depends=(base curl efibootmgr fail2ban git gnupg
         grub linux-firmware man-db man-pages
         networkmanager openssh pass patch pwgen
         sudo tmux ufw unzip vi neovim
         w3m zip zsh)

source=("https://github.com/penguin-fyi/$_pkgname/archive/refs/tags/v$pkgver.tar.gz")

md5sums=('461acfd7f09b535d817ca235a03fc7e0')

package(){
  install=penguin-base.install

	cd "$_pkgname-$pkgver"

  install -dm0750 "$pkgdir"/etc/sudoers.d
  install -Dm0644 etc/sudoers "$pkgdir"/etc/sudoers.d/10-wheel
  install -Dm0644 etc/mirrorlist-penguin "$pkgdir"/etc/pacman.d/mirrorlist-penguin

  install -dm0755 "$pkgdir"/usr/share/penguin/patches
	cp -a patches/. "$pkgdir"/usr/share/penguin/patches

  install -Dm0755 hooks/penguin-config-patch.sh "$pkgdir"/usr/share/libalpm/scripts/penguin-config-patch
  install -Dm0644 hooks/penguin-base-patch.hook "$pkgdir"/usr/share/libalpm/hooks/90-penguin-base-patch.hook

  install -Dm0644 README.md "$pkgdir"/usr/share/doc/"$pkgname"/README.md
  install -Dm0644 LICENSE "$pkgdir"/usr/share/licenses/"$pkgname"/LICENSE
}
